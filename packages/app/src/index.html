<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Hello World!</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <h1>ğŸ’– Hello World!</h1>
    <p>Welcome to your Electron application.</p>
    <button id="btnCreateEngine">è°ƒç”¨ createEngine</button>
    <button id="btnConnect">è°ƒç”¨ connect</button>
    <p id="result" style="margin-top: 1rem; font-weight: bold;"></p>
    <script>
      const result = document.getElementById('result');
      const btnCreateEngine = document.getElementById('btnCreateEngine');
      const btnConnect = document.getElementById('btnConnect');

      btnCreateEngine.addEventListener('click', async () => {
        if (!window.sdk || typeof window.sdk.createEngine !== 'function') {
          result.textContent = 'SDK ä¸å¯ç”¨';
          return;
        }
        try {
          await window.sdk.createEngine();
          result.textContent = 'createEngine è°ƒç”¨å®Œæˆï¼ˆè¯·æŸ¥çœ‹ä¸»è¿›ç¨‹æ—¥å¿—ï¼‰';
        } catch (err) {
          console.error(err);
          result.textContent = 'SDK è°ƒç”¨å¤±è´¥';
        }
      });

      btnConnect.addEventListener('click', async () => {
        if (!window.sdk || typeof window.sdk.connect !== 'function') {
          result.textContent = 'SDK ä¸å¯ç”¨';
          return;
        }
        try {
          let token = "rdIKubNd6vTWuKUdlUU6eOF+lwb3rejulGH0HEWstV0=@h4mx.cn.rongnav.com;h4mx.cn.rongcfg.com";
          const res = await window.sdk.connect(token, 5);
          result.textContent = `connect ç»“æœ: code=${res && res.code !== undefined ? res.code : 'N/A'}, userId=${res && res.userId ? res.userId : ''}`;
        } catch (err) {
          console.error(err);
          result.textContent = `SDK è°ƒç”¨å¤±è´¥: ${err && err.message ? err.message : String(err)}`;
        }
      });
    </script>
  </body>
</html>
